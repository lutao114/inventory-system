<!-- templates/inventory.html -->
{% extends "base.html" %}

{% block title %}åº“å­˜æ¸…å•{% endblock %}

{% block content %}
<div class="container py-4">
    <h2 class="mb-4">ğŸ“¦ åº“å­˜æ¸…å•</h2>

    <!-- æœç´¢æ¡† -->
    <form method="GET" class="mb-4">
        <div class="input-group">
            <input type="text" class="form-control" name="search" placeholder="æœç´¢è®¾å¤‡åç§°æˆ–å‹å·..." value="{{ search }}">
            <button class="btn btn-outline-secondary" type="submit">ğŸ” æœç´¢</button>
            {% if search %}
            <a href="{{ url_for('inventory') }}" class="btn btn-outline-secondary">âœ• æ¸…é™¤</a>
            {% endif %}
        </div>
    </form>

    {% if items %}
        <div class="row g-3">
        {% for item in items %}
            <div class="col-12">
                <div class="card shadow-sm border">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h5 class="card-title mb-1 text-primary">{{ item.name }}</h5>
                            <span class="badge bg-info">ID: {{ item.id }}</span>
                        </div>

                        <p class="mb-1"><strong>å“ç‰Œï¼š</strong>{{ item.brand }}</p>
                        <p class="mb-1"><strong>å‹å·ï¼š</strong>{{ item.model }}</p>
                        <p class="mb-2">
                            <strong>æ•°é‡ï¼š</strong>
                            <span class="badge {% if item.quantity == 0 %}bg-danger{% elif item.quantity <= 5 %}bg-warning{% else %}bg-success{% endif %}">
                                {{ item.quantity }} ä»¶
                            </span>
                        </p>

                        {% if item.remark %}
                        <p class="mb-2"><strong>å¤‡æ³¨ï¼š</strong>{{ item.remark }}</p>
                        {% endif %}

                        <div class="d-flex gap-2 mt-3">
                            <a href="{{ url_for('edit', item_id=item.id) }}" class="btn btn-sm btn-outline-primary flex-grow-1">
                                âœï¸ ç¼–è¾‘
                            </a>
                            <a href="{{ url_for('stock_out') }}?prefill={{ item.name }}|{{ item.brand }}|{{ item.model }}"
                               class="btn btn-sm btn-outline-danger flex-grow-1">
                                ğŸ“¤ å‡ºåº“
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">
            {% if search %}
                ğŸ” æœªæ‰¾åˆ°ä¸ â€œ{{ search }}â€ ç›¸å…³çš„è®¾å¤‡ã€‚
            {% else %}
                ğŸ“­ å½“å‰æ— åº“å­˜è®¾å¤‡ï¼Œè¯·å…ˆ <a href="{{ url_for('stock_in') }}">å…¥åº“</a>ã€‚
            {% endif %}
        </div>
    {% endif %}
</div>
{% endblock %}